podTemplate(
label: 'sdcclient',
cloud: 'openshift',
containers: [
    containerTemplate(name: 'sdcclient',
                    image: 'stewartshea/sysdig-sdcclient:0.8',
                    resourceLimitMemory: '512Mi',
                    workingDir:'/home/jenkins'
                    )
    ]
    )
{

    node('sdcclient') {
        // environment {
        //     SYSDIG_API_TOKEN = credentials('sysdig-api-token')
        //     }
    container('sdcclient')
    {
        stage('Test agent') {
        withCredentials([string(credentialsId: '1a12dfa4-7fc5-47a7-aa17-cc56572a41c7', variable: 'SYSDIG_API_TOKEN')]) {

                sh 'python /sysdig/test.py $SYSDIG_API_TOKEN stupidteam '
                sh 'echo $SYSDIG_API_TOKEN > tokentest'
        }
        }
    }
    }
}